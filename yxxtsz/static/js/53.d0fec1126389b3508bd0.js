webpackJsonp([53],{1327:function(e,r,t){"use strict";function i(e,r,i,n){var a={enrollYear:e,state:r,pageNum:i,pageSize:n};a=D.a.stringify(a);var o=E.a+"/enroll/configuration/listByConditions";return t.i(_.a)({url:o,method:"post",data:a})}function n(){var e=E.a+"/enroll/configuration/getAllEnrollYear";return t.i(_.a)({url:e,method:"post"})}function a(e){return e<10?"0"+e:e}function o(e){var r=new Date(e),t=r.getFullYear(),i=r.getMonth()+1,n=r.getDate(),o=r.getHours(),l=r.getMinutes(),s=r.getSeconds();return t+"-"+a(i)+"-"+a(n)+" "+a(o)+":"+a(l)+":"+a(s)}function l(e){e.beginTime=o(e.beginTime),e.endTime=o(e.endTime),e.originType=e.originType.join(","),e=D.a.stringify(e);var r=E.a+"/enroll/configuration/insertSelective";return t.i(_.a)({url:r,method:"post",data:e})}function s(e){e.beginTime=o(e.beginTime),e.endTime=o(e.endTime),e.originType=e.originType.join(","),e=D.a.stringify(e);var r=E.a+"/enroll/configuration/update";return t.i(_.a)({url:r,method:"post",data:e})}function u(e,r){var i={enrollLogicId:e,state:r},n=E.a+"/enroll/configuration/stateChange";return i=D.a.stringify(i),t.i(_.a)({url:n,method:"post",data:i})}function d(e){var r={enrollLogicId:e},i=E.a+"/enroll/configuration/delete";return r=D.a.stringify(r),t.i(_.a)({url:i,method:"post",data:r})}function c(e,r){var i={enrollId:e,taskType:r};i=D.a.stringify(i);var n=E.a+"/enroll/enrollAndApplication/listByEnrolmentAllocation";return t.i(_.a)({url:n,method:"post",data:i})}function m(e,r){var i={enrollId:e,taskType:r};i=D.a.stringify(i);var n=E.a+"/enroll/sceneAndApplication/listByEnrolmentAllocation";return t.i(_.a)({url:n,method:"post",data:i})}function p(e,r){var i={enrollId:e,type:r};i=D.a.stringify(i);var n=E.a+"/enroll/applicationBasic/listConfigure";return t.i(_.a)({url:n,method:"post",data:i})}function g(e,r,i){var n={enrollName:e,applicationId:r,enrollId:i};n=D.a.stringify(n);var a=E.a+"/enroll/enrollAndApplication/add";return t.i(_.a)({url:a,method:"post",data:n})}function f(e,r,i){var n={applicationName:e,applicationId:r,enrollId:i};n=D.a.stringify(n);var a=E.a+"/enroll/sceneAndApplication/add";return t.i(_.a)({url:a,method:"post",data:n})}function h(e){var r={eaaLogicId:e};r=D.a.stringify(r);var i=E.a+"/enroll/enrollAndApplication/delete";return t.i(_.a)({url:i,method:"post",data:r})}function v(e){var r={saaLogicId:e};r=D.a.stringify(r);var i=E.a+"/enroll/sceneAndApplication/delete";return t.i(_.a)({url:i,method:"post",data:r})}function A(e){var r={eaaLogicId:e};r=D.a.stringify(r);var i=E.a+"/enroll/enrollAndApplication/selectById";return t.i(_.a)({url:i,method:"post",data:r})}function b(e){var r={saaLogicId:e};r=D.a.stringify(r);var i=E.a+"/enroll/sceneAndApplication/selectById";return t.i(_.a)({url:i,method:"post",data:r})}function y(e,r,i,n,a,o,l){var s={eaaLogicId:e,enrollName:r,eaaRevoke:i,type:n,bulletinLogicId:a,bulletinTitle:o,bulletinText:l};s=D.a.stringify(s);var u=E.a+"/enroll/enrollAndApplication/updateApplication";return t.i(_.a)({url:u,method:"post",data:s})}function T(e,r,i,n,a,o,l){var s={saaId:e,applicationName:r,eaaRevoke:i,type:n,bulletinLogicId:a,bulletinTitle:o,bulletinText:l};s=D.a.stringify(s);var u=E.a+"/enroll/sceneAndApplication/updateApplication";return t.i(_.a)({url:u,method:"post",data:s})}function F(e,r){var i={enrollId:e,type:r},n=E.a+"/enroll/processLevel/info";return i=D.a.stringify(i),t.i(_.a)({url:n,method:"post",data:i})}function x(e,r,i){var n={enrollId:e,type:r,hierarchy:i};n=D.a.stringify(n);var a=E.a+"/enroll//processLevel/save";return t.i(_.a)({data:n,url:a,method:"post"})}function B(e,r,i,n){var a={eaaId:e,bulletinUrl:r,bulletinTitle:i,bulletinText:n};a=D.a.stringify(a);var o=E.a+"/enroll/bulletin/add";return t.i(_.a)({method:"post",url:o,data:a})}function C(e){var r={bulletinLogicId:e};r=D.a.stringify(r);var i=E.a+"/enroll/bulletin/selectById";return t.i(_.a)({method:"post",url:i,data:r})}function I(e,r,i,n){var a={bulletinLogicId:e,bulletinUrl:r,bulletinTitle:i,bulletinText:n};a=D.a.stringify(a);var o=E.a+"/enroll/bulletin/update";return t.i(_.a)({method:"post",url:o,data:a})}function k(e,r){var i={eaaId:e,showRange:r};i=D.a.stringify(i);var n=E.a+"/enroll/bulletin/showRange";return t.i(_.a)({method:"post",url:n,data:i})}r.t=i,r.u=n,r.v=l,r.w=s,r.s=u,r.r=d,r.g=c,r.h=m,r.m=p,r.k=g,r.l=f,r.i=h,r.j=v,r.e=A,r.f=b,r.c=y,r.d=T,r.a=F,r.b=x,r.o=B,r.p=C,r.q=I,r.n=k;var _=t(200),w=t(201),D=t.n(w),E=t(199)},1330:function(e,r,t){"use strict";t.d(r,"b",function(){return i}),t.d(r,"a",function(){return n});var i=/^[A-Za-z0-9\u4e00-\u9fa5]+$/,n=function(e,r,t){i.test(r)||t(new Error("请输入中文、英文、或者数字")),t()}},1542:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t(1327),n=t(1330);r.default={data:function(){return{title:"新增",backpage:"/yingxin/process",ruleForm:{enrollName:"",enrollYear:"",beginTime:"",endTime:"",originType:[1,2,3]},stuOptions:[{id:1,name:"本科生"},{id:2,name:"专科生"},{id:3,name:"研究生"}],rules:{enrollName:[{required:!0,message:"迎新流程名称不能为空",trigger:"blur"},{validator:n.a,trigger:"blur"}],beginTime:[{required:!0,message:"开始时间不能为空",trigger:"blur"}],endTime:[{required:!0,message:"结束时间不能为空",trigger:"blur"}],originType:[{required:!0,message:"请选择生源类型",trigger:"blur"}]}}},methods:{back:function(){this.$router.push({path:"process"})},submit:function(e){var r=this;"新增"===this.title?this.$refs[e].validate(function(n){if(!n)return!1;t.i(i.v)(r.ruleForm).then(function(t){r.ruleForm.originType=[1,2,3],t=t.data,"200"===t.state?(r.MessageSuccess(t.message),r.$router.push({path:"/yingxin/process"}),r.$refs[e].resetFields()):(r.$nextTick(function(){var e=r.ruleForm.beginTime.replace(/-/g,"/"),t=r.ruleForm.endTime.replace(/-/g,"/");r.ruleForm.beginTime=new Date(e).getTime(),r.ruleForm.endTime=new Date(t).getTime()}),r.MessageError(t.message))}).catch(function(){r.MessageError()})}):this.$refs[e].validate(function(e){if(!e)return!1;var n=r.$store.getters.processItem;r.ruleForm.enrollName==n.processName&&r.ruleForm.enrollYear==n.year&&r.ruleForm.beginTime==Date.parse(new Date(n.creatTime))&&r.ruleForm.endTime==Date.parse(new Date(n.endTime))&&r.ruleForm.originType==n.originType&&r.ruleForm.enrollLogicId==n.enrollLogicId?(r.MessageSuccess("请求成功！"),r.$router.push({path:"/yingxin/process"})):t.i(i.w)(r.ruleForm).then(function(e){r.ruleForm.originType=[1,2,3],e=e.data,"200"===e.state?(r.MessageSuccess(e.message),r.$router.push({path:"/yingxin/process"})):(r.$nextTick(function(){var e=r.ruleForm.beginTime.replace(/-/g,"/"),t=r.ruleForm.endTime.replace(/-/g,"/");r.ruleForm.beginTime=new Date(e).getTime(),r.ruleForm.endTime=new Date(t).getTime()}),r.MessageError(e.message))}).catch(function(){r.ruleForm.originType=[1,2,3],r.MessageError()})})},changeStart:function(){if(this.ruleForm.beginTime<this.ruleForm.endTime||""===this.ruleForm.endTime)return!0;this.MessageError("结束时间必须大于开始时间"),this.ruleForm.endTime=""},changeEnd:function(){if(this.ruleForm.beginTime<this.ruleForm.endTime)return!0;this.MessageError("结束时间必须大于开始时间"),this.ruleForm.endTime=""},getYear:function(){var e=new Date;this.ruleForm.enrollYear=e.getFullYear()},judgeEdit:function(){var e=this.$store.getters.processItem;e.endTime&&(this.title="编辑",this.ruleForm.enrollName=e.processName,this.ruleForm.enrollYear=e.year,this.ruleForm.beginTime=Date.parse(new Date(e.creatTime)),this.ruleForm.endTime=Date.parse(new Date(e.endTime)),this.ruleForm.originType=e.originType,this.ruleForm.enrollLogicId=e.enrollLogicId)}},created:function(){this.getYear(),this.judgeEdit()}}},1630:function(e,r,t){r=e.exports=t(1322)(!0),r.push([e.i,".vue-header[data-v-9a2a29d0]{width:100%;height:49px;line-height:50px;font-size:14px;border-bottom:1px solid #2184c5}.vue-header p[data-v-9a2a29d0]{color:#555;font-weight:700;display:inline-block;font-family:MicrosoftYaHei-Bold}.vue-header .crumbs[data-v-9a2a29d0]{display:inline-block;position:relative;top:2px;left:11px;font-size:10px;border-left:2px solid #a7a7a7;padding-left:10px}","",{version:3,sources:["D:/yxxt-jdxy/src/pages/yxCms/view/yingxin/addProcess.vue"],names:[],mappings:"AACA,6BACE,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,+BAAiC,CAClC,AACD,+BACE,WAAY,AACZ,gBAAkB,AAClB,qBAAsB,AACtB,+BAAiC,CAClC,AACD,qCACE,qBAAsB,AACtB,kBAAmB,AACnB,QAAS,AACT,UAAW,AACX,eAAgB,AAChB,8BAA+B,AAC/B,iBAAmB,CACpB",file:"addProcess.vue",sourcesContent:["\n.vue-header[data-v-9a2a29d0] {\n  width: 100%;\n  height: 49px;\n  line-height: 50px;\n  font-size: 14px;\n  border-bottom: 1px solid #2184c5;\n}\n.vue-header p[data-v-9a2a29d0] {\n  color: #555;\n  font-weight: bold;\n  display: inline-block;\n  font-family: MicrosoftYaHei-Bold;\n}\n.vue-header .crumbs[data-v-9a2a29d0] {\n  display: inline-block;\n  position: relative;\n  top: 2px;\n  left: 11px;\n  font-size: 10px;\n  border-left: 2px solid #a7a7a7;\n  padding-left: 10px;\n}"],sourceRoot:""}])},1704:function(e,r,t){var i=t(1630);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(1323)("30f5094f",i,!0,{})},1788:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-container",{staticStyle:{padding:"20px"}},[t("el-header",[t("el-row",{staticClass:"vue-header"},[t("p",[e._v(e._s(e.title))]),e._v(" "),t("el-breadcrumb",{staticClass:"crumbs",attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:e.backpage}}},[e._v("迎新配置")]),e._v(" "),"新增"===this.title?t("el-breadcrumb-item",[e._v("新增")]):e._e(),e._v(" "),"编辑"===this.title?t("el-breadcrumb-item",[e._v("编辑")]):e._e()],1)],1)],1),e._v(" "),t("el-main",[t("el-col",{attrs:{span:8}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"迎新流程名称",prop:"enrollName"}},[t("el-input",{attrs:{type:"text",placeholder:"限20字符中英文数字","auto-complete":"off",maxlength:"20"},model:{value:e.ruleForm.enrollName,callback:function(r){e.$set(e.ruleForm,"enrollName",r)},expression:"ruleForm.enrollName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"迎新年限",prop:"enrollYear"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v("\n            "+e._s(e.ruleForm.enrollYear)+"\n          ")]}}])}),e._v(" "),t("el-form-item",{attrs:{label:"开始时间",prop:"beginTime"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"选择开始日期时间","default-time":"12:00:00"},on:{change:e.changeStart},model:{value:e.ruleForm.beginTime,callback:function(r){e.$set(e.ruleForm,"beginTime",r)},expression:"ruleForm.beginTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间","value-format":"timestamp","default-time":"12:00:00"},on:{change:e.changeEnd},model:{value:e.ruleForm.endTime,callback:function(r){e.$set(e.ruleForm,"endTime",r)},expression:"ruleForm.endTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"生源类型",prop:"originType"}},[t("el-checkbox-group",{model:{value:e.ruleForm.originType,callback:function(r){e.$set(e.ruleForm,"originType",r)},expression:"ruleForm.originType"}},e._l(e.stuOptions,function(r,i){return t("el-checkbox",{key:i,attrs:{label:r.id}},[e._v(e._s(r.name))])}))],1),e._v(" "),t("el-form-item",[t("el-button",{on:{click:e.back}},[e._v("返回")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submit("ruleForm")}}},[e._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},560:function(e,r,t){function i(e){t(1704)}var n=t(4)(t(1542),t(1788),i,"data-v-9a2a29d0",null);e.exports=n.exports}});
//# sourceMappingURL=53.d0fec1126389b3508bd0.js.map